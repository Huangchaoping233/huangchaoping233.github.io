import{d as defineComponent,l as ref,c as createElementBlock,a as createVNode,w as withCtx,e as createBaseVNode,F as Fragment,i as renderList,r as resolveComponent,p as provide,o as openBlock,m as createTextVNode,M as normalizeClass,t as toDisplayString}from"./index-DnPDpxWP.js";const _hoisted_1={class:"vlow-functions p-6"},_hoisted_2={class:"flex flex-col space-y-2"},_hoisted_3=["onClick"],_hoisted_4=["onClick"],_hoisted_5={class:"flex flex-col space-y-2 mt-2"},_sfc_main=defineComponent({__name:"functions",setup(__props){const listRef=ref([{name:"hello",type:"function",content:`function hello(a,b,c){
        console.log('print world')
        return a+b+c
    }`},{name:"world",type:"function",content:`function world(){
        console.log('print world')
    }`}]);provide("fnTreeData",listRef);const currentFn=ref({name:"hello",params:[{type:"value",value:"1"},{type:"value",value:"2"},{type:"function",value:{name:"hello",params:[{type:"value",value:"3"},{type:"value",value:"4"},{type:"value",value:"5"}]}}]}),selectRef=ref(0),fns={};function test(){listRef.value.forEach(item=>{eval(`const ${item.name} = ${item.content};fns.${item.name}=${item.name};`),fns[item.name].apply(null,[1,2,3])}),alert(calcFn(currentFn.value,fns))}function calc(e,t){return e.type==="function"?calcFn(e.value,t):e.type==="variable"?e.value:e.value}function calcFn(e,t){const n=[];if(e.params&&e.params.forEach(o=>{n.push(calc(o,t))}),t[e.name])return t[e.name].apply(null,n);throw new Error("函数未定义")}function calcValue(e){return e}function calcVariable(e){return e}function add(){listRef.value.push({name:"new",type:"function",content:`function new(){
            console.log('print world')
        }`,params:[]})}function del(e){listRef.value.splice(e,1)}return(e,t)=>{const n=resolveComponent("FunctionSelect"),o=resolveComponent("el-button"),c=resolveComponent("el-input"),s=resolveComponent("el-form-item"),r=resolveComponent("el-form");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(n,{modelValue:currentFn.value,"onUpdate:modelValue":t[0]||(t[0]=l=>currentFn.value=l),label:"name",value:"name"},null,8,["modelValue"]),createVNode(o,{onClick:test},{default:withCtx(()=>[createTextVNode("测试函数")]),_:1}),createBaseVNode("div",_hoisted_2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(listRef.value,(l,a)=>(openBlock(),createElementBlock("div",{key:l.name,class:"flex flex-row items-center space-x-4"},[createBaseVNode("div",{class:normalizeClass(["cursor-pointer",{"text-blue-500":a===selectRef.value}]),onClick:u=>selectRef.value=a},toDisplayString(l.name),11,_hoisted_3),createBaseVNode("div",{class:"w-4 h-4 ring-1 leading-4 text-center cursor-pointer",onClick:u=>del(a)},"-",8,_hoisted_4)]))),128)),createBaseVNode("div",{onClick:add,class:"w-4 h-4 ring-1 leading-4 text-center cursor-pointer"},"+")]),createBaseVNode("div",_hoisted_5,[createVNode(r,null,{default:withCtx(()=>[createVNode(s,{label:"名称"},{default:withCtx(()=>[createVNode(c,{type:"text",modelValue:listRef.value[selectRef.value].name,"onUpdate:modelValue":t[1]||(t[1]=l=>listRef.value[selectRef.value].name=l),rows:8},null,8,["modelValue"])]),_:1}),createVNode(s,{label:"内容"},{default:withCtx(()=>[createVNode(c,{type:"textarea",modelValue:listRef.value[selectRef.value].content,"onUpdate:modelValue":t[2]||(t[2]=l=>listRef.value[selectRef.value].content=l),rows:8},null,8,["modelValue"])]),_:1})]),_:1})])])}}});export{_sfc_main as default};
